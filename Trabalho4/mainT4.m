clc
clear
format long

%Definições
m = 3
n = 2*m
C = [0.5	0.5	0.5];
X = [0.5	0.5	0.5];
xi = X;
ci = C;

%f1 → C(1)		C(2)		C(3)		2
%f2 → C(1)*X(1)	C(2)*X(2)	C(3)*X(3)		0
%f3 → C(1)*X(1)^2	C(2)*X(2)^2	C(3)*X(3)^2	2/3
%f4 → C(1)*X(1)^3	C(2)*X(2)^3	C(3)*X(3)^3	0
%f5 → C(1)*X(1)^4	C(2)*X(2)^4	C(3)*X(3)^4	2/5
%f6 → C(1)*X(1)^5	C(2)*X(2)^5	C(3)*X(3)^5	0

dx = [1e-6, 1e-6, 1e-6, 1e-6, 1e-6, 1e-6];

Df1_dX1 = 0;
Df2_dX1 = C(1);
Df3_dX1 = 2*C(1)*X(1);
Df4_dX1 = 3*C(1)*X(1)^2;
Df5_dX1 = 4*C(1)*X(1)^3;
Df6_dX1 = 5*C(1)*X(1)^4;

Df1_dX2 = 0;
Df2_dX2 = C(2);
Df3_dX2 = 2*C(2)*X(2);
Df4_dX2 = 3*C(2)*X(2)^2;
Df5_dX2 = 4*C(2)*X(2)^3;
Df6_dX2 = 5*C(2)*X(2)^4;

Df1_dX3 = 0;
Df2_dX3 = C(3);
Df3_dX3 = 2*C(3)*X(3);
Df4_dX3 = 3*C(3)*X(3)^2;
Df5_dX3 = 4*C(3)*X(3)^3;
Df6_dX3 = 5*C(3)*X(3)^4;

Df1_dC1 = 1;
Df2_dC1 = X(1)
Df3_dC1 = X(1)^2
Df4_dC1 = X(1)^3
Df5_dC1 = X(1)^4
Df6_dC1 = X(1)^5

Df1_dC2 = 1;
Df2_dC2 = X(2)
Df3_dC2 = X(2)^2
Df4_dC2 = X(2)^3
Df5_dC2 = X(2)^4
Df6_dC2 = X(2)^5

Df1_dC3 = 1;
Df2_dC3 = X(3)
Df3_dC3 = X(3)^2
Df4_dC3 = X(3)^3
Df5_dC3 = X(3)^4
Df6_dC3 = X(3)^5


%df1(x)/dX1		df1(x)/dX2		...		df1(x)/dx6
%df2(x)/dX1		df2(x)/dX2		...
%...			...			...
%df6(x)/dX1		...			...		df6/dx6

erro = 1;
cont = 0;
while (erro>1e-6 && cont<100)
	cont++;
	A(1,1) = f1(C(1)+dx(1), C(2), C(3))	/Df1_dX1;
	A(1,2) = f1(C(1), C(2)+dx(2), C(3))	/Df1_dX2;
	A(1,3) = f1(C(1), C(2), C(3)+dx(3))	/Df1_dX3;
	A(1,4) = f1(C(1), C(2), C(3))		/Df1_dC1;
	A(1,5) = f1(C(1), C(2), C(3))		/Df1_dC2;
	A(1,6) = f1(C(1), C(2), C(3))		/Df1_dC3;

	A(2,1) = f2(C(1)+dx(1), C(2), C(3), X(1), X(2), X(3))	/Df1_dX1;
	A(2,2) = f2(C(1), C(2)+dx(2), C(3), X(1), X(2), X(3))	/Df1_dX2;
	A(2,3) = f2(C(1), C(2), C(3)+dx(3), X(1), X(2), X(3))	/Df1_dX3;
	A(2,4) = f2(C(1), C(2), C(3), X(1)+dx(4), X(2), X(3))	/Df1_dC1;
	A(2,5) = f2(C(1), C(2), C(3), X(1), X(2)+dx(5), X(3))	/Df1_dC2;
	A(2,6) = f2(C(1), C(2), C(3), X(1), X(2), X(3)+dx(6))	/Df1_dC3;

	A(3,1) = f3(C(1)+dx(1), C(2), C(3), X(1), X(2), X(3))	/Df1_dX1;
	A(3,2) = f3(C(1), C(2)+dx(2), C(3), X(1), X(2), X(3))	/Df1_dX2;
	A(3,3) = f3(C(1), C(2), C(3)+dx(3), X(1), X(2), X(3))	/Df1_dX3;
	A(3,4) = f3(C(1), C(2), C(3), X(1)+dx(4), X(2), X(3))	/Df1_dC1;
	A(3,5) = f3(C(1), C(2), C(3), X(1), X(2)+dx(5), X(3))	/Df1_dC3;
	A(3,6) = f3(C(1), C(2), C(3), X(1), X(2), X(3)+dx(6))	/Df1_dC3;

	A(4,1) = f4(C(1)+dx(1), C(2), C(3), X(1), X(2), X(3))	/Df1_dX1;
	A(4,2) = f4(C(1), C(2)+dx(2), C(3), X(1), X(2), X(3))	/Df1_dX2;
	A(4,3) = f4(C(1), C(2), C(3)+dx(3), X(1), X(2), X(3))	/Df1_dX3;
	A(4,4) = f4(C(1), C(2), C(3), X(1)+dx(4), X(2), X(3))	/Df1_dC1;
	A(4,5) = f4(C(1), C(2), C(3), X(1), X(2)+dx(5), X(3))	/Df1_dC2;
	A(4,6) = f4(C(1), C(2), C(3), X(1), X(2), X(3)+dx(6))	/Df1_dC3;

	A(5,1) = f5(C(1)+dx(1), C(2), C(3), X(1), X(2), X(3))	/Df1_dX1;
	A(5,2) = f5(C(1), C(2)+dx(2), C(3), X(1), X(2), X(3))	/Df1_dX2;
	A(5,3) = f5(C(1), C(2), C(3)+dx(3), X(1), X(2), X(3))	/Df1_dX3;
	A(5,4) = f5(C(1), C(2), C(3), X(1)+dx(4), X(2), X(3))	/Df1_dC1;
	A(5,5) = f5(C(1), C(2), C(3), X(1), X(2)+dx(5), X(3))	/Df1_dC2;
	A(5,6) = f5(C(1), C(2), C(3), X(1), X(2), X(3)+dx(6))	/Df1_dC3;

	A(6,1) = f6(C(1)+dx(1), C(2), C(3), X(1), X(2), X(3))	/Df1_dX1;
	A(6,2) = f6(C(1), C(2)+dx(2), C(3), X(1), X(2), X(3))	/Df1_dX2;
	A(6,3) = f6(C(1), C(2), C(3)+dx(3), X(1), X(2), X(3))	/Df1_dX3;
	A(6,4) = f6(C(1), C(2), C(3), X(1)+dx(4), X(2), X(3))	/Df1_dC1;
	A(6,5) = f6(C(1), C(2), C(3), X(1), X(2)+dx(5), X(3))	/Df1_dC2;
	A(6,6) = f6(C(1), C(2), C(3), X(1), X(2), X(3)+dx(6))	/Df1_dC3;

	A(1,7) = (-1)* f1(C(1), C(2), C(3), X(1), X(2), X(3));
	A(2,7) = (-1)* f2(C(1), C(2), C(3), X(1), X(2), X(3));
	A(3,7) = (-1)* f3(C(1), C(2), C(3), X(1), X(2), X(3));
	A(4,7) = (-1)* f4(C(1), C(2), C(3), X(1), X(2), X(3));
	A(5,7) = (-1)* f5(C(1), C(2), C(3), X(1), X(2), X(3));
	A(6,7) = (-1)* f6(C(1), C(2), C(3), X(1), X(2), X(3));
	
	dx = fGauss(n,A);

	X=xi+dx;
	xi=X;
	C=ci+dx;
	ci=C;
	erro=max(abs(dx))
end




